window.Page=function(e){this.tips=e},$.extend(Page.prototype,{vcomment:function(){var e=$("#vcomment");if(0!==e.length){var t=new Vcomment({id:"vcomment",postId:e.data("postid"),url:"https://ld246.com",userName:e.data("name"),currentPage:1,vditor:{lineNumber:Label.showCodeBlockLn,hljsEnable:!Label.luteAvailable,hljsStyle:Label.hljsStyle},error:function(){e.remove()}});t.render()}},share:function(){var e=$(".article__share");if(0!==e.length){var t=e.find(".item__qr"),a=e.data("url"),l=e.data("avatar"),r=encodeURIComponent(e.data("title")+" - "+e.data("blogtitle")),n=encodeURIComponent(a),i={};i.tencent="http://share.v.t.qq.com/index.php?c=share&a=index&title="+r+"&url="+n+"&pic="+l,i.weibo="http://v.t.sina.com.cn/share/share.php?title="+r+"&url="+n+"&pic="+l,i.qqz="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+n+"&sharesource=qzone&title="+r+"&pics="+l,i.twitter="https://twitter.com/intent/tweet?status="+r+" "+n,e.find("span").click((function(){var e=$(this).data("type");if(e){if("wechat"===e){if("undefined"==typeof QRious&&Util.addScript(Label.staticServePath+"/js/lib/qrious.min.js","qriousScript"),"none"===t.css("background-image")){var l=new QRious({padding:0,element:t[0],value:a,size:99});t.css("background-image","url(".concat(l.toDataURL("image/jpeg"),")")).show()}else t.slideToggle();return!1}window.open(i[e],"_blank","top=100,left=200,width=648,height=618")}}))}},load:function(){this.vcomment()},loadRandomArticles:function(e){var t=this.tips.randomArticles1Label;$.ajax({url:Label.servePath+"/articles/random.json",type:"GET",success:function(a,l){var r=a.randomArticles;if(r&&0!==r.length){for(var n="",i=0;i<r.length;i++){var o=r[i],s=o.articleTitle;n+="<li><a rel='nofollow' title='"+s+"' href='"+Label.servePath+o.articlePermalink+"'>"+s+"</a></li>"}var c=(e||"<h4>"+t+"</h4>")+"<ul>"+n+"</ul>";$("#randomArticles").append(c)}else $("#randomArticles").remove()}})},loadRelevantArticles:function(e,t){$.ajax({url:Label.servePath+"/article/relevant/"+e+".json",type:"GET",success:function(e,a){var l=e.relevantArticles;if(l&&0!==l.length){for(var r="",n=0;n<l.length;n++){var i=l[n],o=i.articleTitle;r+="<li><a rel='nofollow' title='"+o+"' href='"+Label.servePath+i.articlePermalink+"'>"+o+"</a></li>"}var s=t+"<ul>"+r+"</ul>";$("#relevantArticles").append(s)}else $("#relevantArticles").remove()},error:function(){$("#relevantArticles").remove()}})},loadExternalRelevantArticles:function(e,t){var a=this.tips;try{$.ajax({url:"https://rhythm.b3log.org/get-articles-by-tags.do?tags="+e+"&blogHost="+a.blogHost+"&paginationPageSize="+a.externalRelevantArticlesDisplayCount,type:"GET",cache:!0,dataType:"jsonp",error:function(){$("#externalRelevantArticles").remove()},success:function(e,l){var r=e.articles;if(r&&0!==r.length){for(var n="",i=0;i<r.length;i++){var o=r[i],s=o.articleTitle;n+="<li><a rel='nofollow' title='"+s+"' target='_blank' href='"+o.articlePermalink+"'>"+s+"</a></li>"}var c=(t||"<h4>"+a.externalRelevantArticles1Label+"</h4>")+"<ul>"+n+"</ul>";$("#externalRelevantArticles").append(c)}else $("#externalRelevantArticles").remove()}})}catch(e){}}});